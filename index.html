<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VAR Sim</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #111; color: #fff; }
    video { width: 100%; max-width: 720px; display: block; margin-bottom: 10px; }
    input[type="text"] { width: 100%; padding: 10px; margin-bottom: 10px; font-size: 16px; }
    button { padding: 10px 15px; margin: 5px; font-size: 16px; cursor: pointer; }
    #pointsDisplay { font-size: 20px; margin-bottom: 10px; }
  </style>
</head>
<body>
  <h1>VAR Review Simulator</h1>
  <div id="pointsDisplay">Points: 0</div>
  <video id="clip" muted></video>
  <br />
  <button onclick="playClip()">Play</button>
  <button onclick="playClip(0.25)">Play 0.25x</button>
  <button onclick="pauseClip()">Pause</button>
  <br /><br />
  <input id="inputCall" type="text" placeholder="Type your call here... (e.g., 'red card for green')" />
  <button onclick="submitCall()">Submit Call</button>

  <script>
    const clips = [
      {
        src: "https://files.catbox.moe/e9g8y1.mp4",
        correctCalls: ["yellow card for keeper", "goal"],
        skipScoring: false
      },
      {
        src: "https://files.catbox.moe/5gfn4q.mp4",
        correctCalls: ["I dont even know. Initally yellow for grey.", "free kick for red"],
        skipScoring: true
      },
      {
        src: "https://files.catbox.moe/lr37rd.mp4",
        correctCalls: ["red card for green", "free kick for yellow"],
        skipScoring: false
      },
      {
        src: "https://files.catbox.moe/teeqkh.mp4",
        correctCalls: ["yellow card for red", "red card for grey", "free kick for grey"],
        skipScoring: false
      }
    ];

    let currentClipIndex = 0;
    let points = 0;
    const video = document.getElementById("clip");
    const input = document.getElementById("inputCall");
    const pointsDisplay = document.getElementById("pointsDisplay");

    function loadClip() {
      const clip = clips[currentClipIndex];
      video.src = clip.src;
      video.load();
    }

    function playClip(speed = 1.0) {
      video.playbackRate = speed;
      video.play();
    }

    function pauseClip() {
      video.pause();
    }

    function submitCall() {
      const call = input.value.toLowerCase().trim();
      input.value = "";
      const clip = clips[currentClipIndex];

      if (!clip.skipScoring) {
        const matched = clip.correctCalls.filter(c => call.includes(c.toLowerCase()));
        const accuracy = matched.length / clip.correctCalls.length;
        const awarded = 100 * accuracy;
        points += awarded;
        alert(`You got ${awarded} points (${Math.round(accuracy * 100)}% correct)`);
      } else {
        alert("This clip has no scoring â€” opinion-based.");
      }

      currentClipIndex = (currentClipIndex + 1) % clips.length;
      pointsDisplay.textContent = `Points: ${Math.round(points)}`;
      loadClip();
    }

    loadClip();
  </script>
</body>
</html>
